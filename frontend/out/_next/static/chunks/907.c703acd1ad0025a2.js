"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{88907:function(e,t,r){r.d(t,{d:function(){return K}});var n=r(4942),o=r(91341);r(88473),r(61798),r(45772),r(95811),r(48764).Buffer;var i=r(17187);function a(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout(()=>{throw e})}}r(4445),r(79826),r(12840),r(30778),r(74286);class s extends i.EventEmitter{emit(e){let t="error"===e,r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(t){let e;if(o.length>0&&([e]=o),e instanceof Error)throw e;let t=Error(`Unhandled error.${e?` (${e.message})`:""}`);throw t.context=e,t}let s=r[e];if(void 0===s)return!1;if("function"==typeof s)a(s,this,o);else{let e=s.length,t=function(e){let t=e.length,r=Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let r=0;r<e;r+=1)a(t[r],this,o)}return!0}}Symbol("IGNORE_SUBSTREAM");var c=r(13631),l=r(72378),h=r.n(l),d=r(2043),p=r.n(d);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let f=p().getLogger("http-helpers");f.setLevel(d.levels.INFO);let g="torus-default";async function E(e,t){try{new URL(e)}catch(e){}return fetch(e,t)}let y=(e,t)=>{let r=new Promise((t,r)=>{let n=setTimeout(()=>{clearTimeout(n),r(Error(`Timed out in ${e}ms`))},e)});return Promise.race([t,r])},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(o.headers=m(m({},o.headers),function(){let e={};return g&&(e["x-api-key"]=g),e}()));let i=h()(o,r,{method:"POST"});return n.isUrlEncodedData?(i.body=t,"application/json; charset=utf-8"===i.headers["Content-Type"]&&delete i.headers["Content-Type"]):i.body=JSON.stringify(t),y(n.timeout||6e4,E(e,i).then(e=>{if(n.logTracingHeader&&f.info(`Request tracing with traceID=${e.headers.get("x-web3-correlation-id")}`),e.ok)return e.json();throw f.info(`Response: ${e.status} ${e.statusText}`),f.info(`Url: ${e.url}`),e}))};var w=r(96245);let N={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},C=e=>{if(e===N.EIP155||e===N.SOLANA)return 1;throw Error(`Chain namespace ${e} is not supported`)},b=e=>{let t=N.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:137===e?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon",decimals:18}:56===e?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:97===e?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:25===e?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:8217===e?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:null},v=e=>{let t=N.SOLANA;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:2===e?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},T=(e,t)=>{if(e===N.OTHER)return null;let r=t?"number"==typeof t?t:parseInt(t,16):C(e);return e===N.EIP155?b(r):e===N.SOLANA?v(r):null};class k extends c.s{constructor(e,t){super(t),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class A extends k{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new A(e,`${A.messages[e]}, ${t}`)}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.fromCode(5013,e)}}(0,n.Z)(A,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class S extends k{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new S(e,`${S.messages[e]}. ${t}`)}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S.fromCode(5114,e)}static mfaEnabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S.fromCode(5115,e)}}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,n.Z)(S,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa"});let _={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},D=P({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare",SLOPE:"slope"},_),x=P({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},_),R=P(P({},x),D);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}_.OPENLOGIN,_.WALLET_CONNECT_V1,_.WALLET_CONNECT_V2,D.TORUS_SOLANA,D.PHANTOM,D.SOLFLARE,D.SLOPE,x.TORUS_EVM,x.METAMASK,x.COINBASE;let M={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},$=L(L({},M),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class W extends s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"sessionTime",86400),(0,n.Z)(this,"clientId",void 0),(0,n.Z)(this,"web3AuthNetwork",o.dr.MAINNET),(0,n.Z)(this,"rehydrated",!1),(0,n.Z)(this,"chainConfig",null),this.setAdapterSettings(e)}get chainConfigProxy(){return this.chainConfig?L({},this.chainConfig):null}setAdapterSettings(e){if(this.status===M.READY)return;null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId),null!=e&&e.web3AuthNetwork&&(this.web3AuthNetwork=e.web3AuthNetwork);let t=e.chainConfig;if(t){if(!t.chainNamespace)throw A.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=t.chainNamespace;let e=T(t.chainNamespace,t.chainId),r=L(L({},e||{}),t);this.chainConfig=r}}checkConnectionRequirements(){if(this.name!==R.WALLET_CONNECT_V1||this.status!==M.CONNECTING){if(this.status===M.CONNECTING)throw A.notReady("Already connecting");if(this.status===M.CONNECTED)throw S.connectionError("Already connected");if(this.status!==M.READY)throw S.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw A.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig||!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==N.OTHER)throw A.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==N.OTHER)throw A.invalidParams("chainID is required in chainConfig");if(this.status!==M.NOT_READY){if(this.status===M.CONNECTED)throw A.notReady("Already connected");if(this.status===M.READY)throw A.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==M.CONNECTED)throw S.disconnectionError("Not connected with wallet")}updateAdapterData(e){this.adapterData=e,this.emit($.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}let U="https://authjs.web3auth.io";var Z=p().getLogger("web3auth-logger");function B(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;let o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(e){return!!(e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&r&&0!==n)}}let H=e=>{let t=(0,w.Z)(e);return!!(!t.exp||t.exp<Math.floor(Date.now()/1e3))},q=async(e,t)=>{let r=await O(`${U}/siww/get`,{payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"});if(!r.success)throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return r.challenge},F=async(e,t,r,n,o,i,a)=>{let s={signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:r,issuer:n,audience:window.location.hostname,timeout:o},c=await O(`${U}/siww/verify`,s,{headers:{client_id:i,wallet_provider:n,web3auth_network:a}});if(!c.success)throw Z.error("Failed to authenticate user, ,message verification failed",c.error),Error("Failed to authenticate user, ,message verification failed");return c.token},G=(e,t)=>B("localStorage")?localStorage.getItem(`${e.toLowerCase()}_${t}`):null,V=(e,t,r)=>B("localStorage")?localStorage.setItem(`${e.toLowerCase()}_${t}`,r):null,Y=(e,t)=>B("localStorage")?localStorage.removeItem(`${e.toLowerCase()}_${t}`):null;class K extends W{async init(e){this.chainConfig||(this.chainConfig=T(N.EIP155,1))}async authenticateUser(){if(!this.provider||this.status!==M.CONNECTED)throw S.notConnectedError();let{chainNamespace:e,chainId:t}=this.chainConfig,r=await this.provider.request({method:"eth_accounts"});if(r&&r.length>0){let n=G(r[0],this.name);if(n){let e=H(n);if(!e)return{idToken:n}}let o={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(t,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},i=await q(o,e),a=await this.provider.request({method:"personal_sign",params:[i,r[0]]}),s=await F(e,a,i,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return V(r[0],this.name,s),{idToken:s}}throw S.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();let e=await this.provider.request({method:"eth_accounts"});e&&e.length>0&&Y(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit($.DISCONNECTED)}}}}]);